<?php
    session_start();

    require_once './php/helpers/inputValue.php';

    if (isset($_SESSION['registered'])) {
        unset($_SESSION['registered']);
        unset($_SESSION['form_name']);
        unset($_SESSION['form_surname']);
        unset($_SESSION['form_email']);
        unset($_SESSION['form_password']);
        unset($_SESSION['form_confirm']);
    }
    else {
        unset($_SESSION['form_login_email']);
        unset($_SESSION['form_login_password']);
    }

    if (!isset($_SESSION['is_user_logged'])) {
        header('Location: index.html');
		exit();
    }
?>

<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>User Logged</title>

    <link rel="stylesheet" href="./css/user.css">

    <!-- Google font -->
    <link href="https://fonts.googleapis.com/css?family=Alegreya:700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400" rel="stylesheet">

</head>

<body>
    <header>
        <div class="branding">
            <div class="menu-button menu-toggle nav">
                <i class="material-icons">menu</i>
            </div>
            <p>casa-maria</p>
        </div>
        <div class="page-details">
            <div class="title"></div>
        </div>
        <div class="settings">
            <div class="menu-button profile">
                <i class="material-icons" onclick="logout()">close</i>
            </div>
        </div>
    </header>
    <div class="main">
        <nav>
            <div class="title-block">
                <p>casa-maria</p>
            </div>
            <ul>
                <li><a href="#" id="home"><i class="material-icons">home</i>
                        <span>Strona główna</span></a></li>
                <li><a href="#" id="profile"><i class="material-icons">person</i>
                        <span>Profil</span></a></li>
                <!-- <li><a href="#" id="reservation"><i class="material-icons">ballot</i>
                        <span>Twoje rezerwacje</span></a></li> -->
                <li><a href="#" id="delete"><i class="material-icons">delete_forever</i>
                        <span>Usuń rezerwację</span></a></li>
            </ul>
        </nav>
        <article>
            <div class="card">
                <h3>Stąd możesz zarządać swoimi rezerwacjami!</h3>
            </div>
        </article>
    </div>

    <!--MODAL SECTION-->
    <!--USER PROFILE-->
    <div class="modal-user-profile">
        <div class="input">
            <label for="userName">Imię</label>
            <input type="text" id="userName" name="userName" disabled <?=inputValue("name"); ?> >
            <input type="submit" id="name-change-butt" name="name-change-butt" value="Zmień">
            <p id="errorName"></p>
        </div>
        <div class="input">
            <label for="userSurname">Nazwisko</label>
            <input type="text" id="userSurname" name="userSurname" disabled <?=inputValue("surname"); ?> >
            <input type="submit" id="surname-change-butt" name="surname-change-butt" value="Zmień">
            <p id="errorSurname"></p>
        </div>
        <div class="input">
            <label for="userEmail">Email</label>
            <input type="email" id="userEmail" name="userEmail" disabled <?=inputValue("email"); ?> >
            <input type="submit" id="email-change-butt" name="email-change-butt" value="Zmień">
            <p id="errorEmail"></p>
        </div>
        <div class="input">
            <label for="userPassword">Hasło</label>
            <input type="password" id="userPassword" name="userPassword" disabled <?=inputValue("password"); ?> >
            <input type="submit" id="password-change-butt" name="password-change-butt" value="Zmień">
            <p id="errorPassword"></p>
        </div>
        <div class="input hidden">
            <label for="userPasswordConfirm">Potwierdź hasło</label>
            <input type="password" id="userPasswordConfirm" name="userPasswordConfirm" required>
            <p id="errorPasswordConfirm"></p>
        </div>
    </div>
    <!--USER RESERVATION-->
    <div class="modal-user-reservation">
        <p>TĄ OPCJĘ ZOSTAWIAM NA INŻYNIERKĘ</p>
        <!-- <div class="reserve-info">
            <table id="user-reservation-table">
                <thead>
                    <tr>
                        <td>Nr</td>
                        <td>Od</td>
                        <td>Do</td>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="reserve-info">
            <div class="input">
                <p>
                    <label for="nr">Nr</label>
                    <input type="number" id="nr" name="nr" disabled> TO LUB SELECT
                    <select name="" id="nr"></select>
                </p>
                <p>
                    <label for="od-reserve">Od</label>
                    <input type="date" id="od-reserve" name="od-reserve" disabled>
                    <input type="button" id="od-change-butt" name="od-change-butt" value="Zmień">
                    <p id="errorTo"></p>
                </p>
                <p>
                    <label for="do-reserve">Do</label>
                    <input type="date" id="do-reserve" name="do-reserve" disabled>
                    <input type="submit" id="do-change-butt" name="do-change-butt" value="Zmień">
                    <p id="errorDateTo"></p>
                </p>
            </div>
        </div> -->
    </div>
    <!--USER RESERVATION DELETE-->
    <div class="modal-user-reservation-delete">
        <table id="user-reservation-delete-table">
            <thead>
                <tr>
                    <td>Nr</td>
                    <td>Przyjazd</td>
                    <td>Wyjazd</td>
                    <td>Usuń rezerwację</td>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous"></script>
    <script src="./js/user.js" type="module"></script>
</body>

</html>